<!doctype html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>발로란트 스킨 도감</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
                background-color: #121212;
                color: #fff;
                text-align: center;
            }
            .container {
                max-width: 1200px;
                margin: auto;
                padding: 20px;
            }
            .search-section {
                margin-bottom: 20px;
            }
            .search-section input {
                width: 80%;
                padding: 10px;
                border-radius: 5px;
                border: none;
                outline: none;
                font-size: 16px;
            }
            .filter-section {
                display: flex;
                justify-content: center;
                gap: 10px;
                margin-bottom: 20px;
            }
            .filter-section select {
                padding: 10px;
                border-radius: 5px;
                border: none;
                background: #333;
                color: #fff;
            }
            .skins-grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
                gap: 10px;
                margin-top: 10px;
            }
            .skin-card {
                background: #1e1e1e;
                padding: 10px;
                border-radius: 8px;
                text-align: center;
                display: flex;
                flex-direction: column;
                align-items: center;
                position: relative;
                box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
            }
            .skin-card img {
                width: 180px;
                height: 100px;
                object-fit: contain;
                border-radius: 8px;
            }
            .skin-info {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                margin-top: 10px;
                gap: 8px;
                width: 100%;
            }
            .skin-info img {
                width: 24px;
                height: 24px;
            }
            .skin-info p {
                flex-grow: 0;
                text-align: center;
                margin: 0;
                font-weight: bold;
            }
            .price-info {
                position: absolute;
                top: 10px;
                left: 10px;
                padding: 5px;
                border-radius: 4px;
                display: flex;
                align-items: center;
                background: transparent;
            }
            .price-info img {
                width: 16px;
                height: 16px;
                margin-right: 5px;
                box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
            }
            .price-info span {
                font-size: 14px;
                font-weight: bold;
            }
            #menu-button {
                position: fixed;
                top: 10px;
                left: 10px;
                background: transparent;
                color: white;
                font-size: 24px;
                border: none;
                cursor: pointer;
                z-index: 6000;
            }
            .popup {
                display: none;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 320px;
                max-height: 80vh;
                overflow-y: auto;
                background: #1e1e1e;
                padding: 20px;
                border-radius: 12px;
                box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.3);
                text-align: center;
                z-index: 9999;
                animation: fadeIn 0.3s ease-in-out;
            }

            .popup-skin-card {
                /* 팝업 안에서 스킨 카드가 너무 크거나 작다면 이곳에서 조정 */
                width: 100%;
                max-width: 300px;
                margin: 0 auto;
                box-shadow: none !important;
            }
            #favorite-btn {
                margin-top: 10px;
                padding: 8px 12px;
                background: gold;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 16px; /* 추가 부분 */
                color: black; /* 버튼 배경이 gold이므로 텍스트는 검은색으로 */
                text-shadow: 1px 1px 2px rgba(255, 255, 255, 3); /* 약간의 흰색 그림자 */
            }
            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translate(-50%, -55%);
                }
                to {
                    opacity: 1;
                    transform: translate(-50%, -50%);
                }
            }
            .close-btn {
                position: absolute;
                top: 12px;
                right: 16px;
                font-size: 20px;
                cursor: pointer;
                color: white; /*애니메이션(호버/클릭) 효과 */
                transition: transform 0.2s ease;
                z-index: 9999;
            }

            .close-btn:hover {
                transform: scale(1.1); /* 마우스 올라가면 살짝 커짐 */
            }

            .close-btn:active {
                transform: scale(0.9);
                /* 클릭(눌렀을 때)하면 살짝 작아짐 */
            }

            .side-menu {
                height: 100%;
                width: 0;
                position: fixed;
                top: 0;
                left: 0;
                background-color: #1e1e1e;
                overflow-x: hidden;
                transition: 0.3s;
                padding-top: 60px;
                z-index: 5000;
            }

            .side-menu.open {
                width: 250px; /* 열렸을 때 폭 */
            }

            .close-side-menu {
                position: absolute;
                top: 20px;
                right: 20px;
                font-size: 24px;
                color: #fff;
                cursor: pointer;
                text-decoration: none;
            }

            #menu-nav {
                display: flex;
                flex-direction: column; /* 항목을 위에서 아래로 배치 */
                align-items: center; /* 자식 항목(li)을 수평 중앙 정렬 */
                list-style-type: none; /* 점(불릿) 제거 */
                padding: 0;
                margin: 0;
            }

            #menu-nav li {
                width: 80%; /* 항목(및 구분선) 전체 너비 */
                margin: 0 auto; /* 수평 중앙 정렬 */
                text-align: center; /* 텍스트 중앙 정렬 */
                border-bottom: 1px solid #333;
                padding: 10px 0;
            }

            #menu-nav li:last-child {
                border-bottom: none; /* 마지막 항목은 구분선 제거 */
            }

            /* 호버 시 배경 강조 (선택 사항) */
            #menu-nav li:hover {
                background-color: #333;
            }

            .favorites-popup {
                display: none; /* 처음엔 숨김 */
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 320px;
                max-height: 80vh;
                overflow-y: auto;
                background: #1e1e1e;
                padding: 20px;
                border-radius: 12px;
                box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.3);
                text-align: center;
                z-index: 9998; /* 스킨 팝업이 9999라면, 그 아래나 위로 조정 가능 */
                animation: fadeIn 0.3s ease-in-out;
            }

            .favorites-popup-content {
                position: relative;
            }

            .close-favorites-popup {
                position: absolute;
                top: -30px;
                right: -2px;
                font-size: 24px;
                cursor: pointer;
                color: white;
                transition: transform 0.2s ease;
            }

            .close-favorites-popup:hover {
                transform: scale(1.1);
            }

            .close-favorites-popup:active {
                transform: scale(0.9);
            }

            #favorites-list {
                margin-top: 20px;
                /* 스킨 목록을 자유롭게 스타일링, 아래는 예시 */
                display: flex;
                flex-direction: column;
                gap: 10px;
            }

            /* 스킨 항목 아이템 스타일 (즐겨찾기 목록에서) */
            .favorite-item {
                background: #2c2c2c;
                padding: 10px;
                border-radius: 6px;
                cursor: pointer;
                transition: transform 0.2s;
            }

            .favorite-item:hover {
                transform: scale(1.02);
            }

            .shop-counter-popup {
                display: none;
                font-size: 18px;
                margin: 0 0 10px;
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 320px;
                max-height: 80vh;
                overflow-y: auto;
                background: #1e1e1e;
                padding: 20px;
                border-radius: 12px;
                box-shadow: 0px 0px 15px rgba(255, 255, 255, 0.3);
                text-align: center;
                z-index: 9998;
                animation: fadeIn 0.3s ease-in-out;
            }

            .shop-counter-content {
                position: relative;
            }

            .close-shop-counter {
                position: absolute;
                top: -30px;
                right: 1px;
                font-size: 24px;
                cursor: pointer;
                color: white;
                transition: transform 0.2s ease;
            }

            .close-shop-counter:hover {
                transform: scale(1.1);
            }

            .close-shop-counter:active {
                transform: scale(0.9);
            }

            .shop-current {
                margin-top: 16px;
                margin: 0 0 8px;
            }

            .shop-history-section {
                margin-top: 15px;
            }

            #shop-history-btn {
                margin-bottom: 10px;
            }

            .shop-history {
                background: #2c2c2c;
                padding: 10px;
                border-radius: 8px;
            }

            .shop-history-item {
                background: #333;
                padding: 10px;
                margin-bottom: 10px;
                border-radius: 6px;
            }
            #shop-counter-btn {
                margin-top: 10px;
                padding: 8px 12px;
                background: gold;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 16px;
                color: black; /* 버튼 배경이 gold 이므로 텍스트는 검은색 */
                text-shadow: 1px 1px 2px rgba(255, 255, 255, 3); /* 약간의 흰색 그림자 */
            }

            #favorite-btn,
            #shop-counter-btn {
                margin: 5px;
                font-weight: bold;
            }

            #shop-history-btn {
                background: gold;
                color: black;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px; /* 필요 시 조정 */
                padding: 8px 12px;
                margin-bottom: 10px; /* 아래쪽 간격 */
                text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.6);
            }

            /* "오늘의 상점 날짜 세기" 팝업 내에서 가로 배치 컨테이너 */
            .shop-counter-row {
                display: flex;
                align-items: center;
                /* justify-content: space-between; */ /* 필요하면 이름과 버튼을 좌우로 띄워 배치 */
                gap: 10px;
                margin-top: 10px;
                justify-content: center;
                background: #2c2c2c; /* 살짝 어두운 배경 */
                padding: 10px; /* 내부 여백 */
                border-radius: 8px; /* 둥근 모서리 */
                border: 1px solid #444; /* 옅은 테두리 */
            }

            #shop-current {
                display: flex;
                flex-direction: column;
                align-items: center; /* 수직 정렬(열 방향이므로 가로 중앙) */
                gap: 15px; /* 여러 row 사이 간격 */
            }

            .shop-counter-name,
            .shop-counter-days,
            .shop-counter-stop-btn {
                padding: 5px 8px;
                position: relative;
            }

            /* shop-counter-name 뒤에 구분선 */
            .shop-counter-name::after {
                content: "";
                display: inline-block;
                width: 1px; /* 선 두께 */
                height: 20px; /* 선 길이 */
                background-color: #666;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
            }

            /* shop-counter-days 뒤에도 선을 넣고 싶다면 */
            .shop-counter-days::after {
                content: "";
                display: inline-block;
                width: 1px;
                height: 20px;
                background-color: #666;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
            }

            /* 항목들이 여러 개 있을 때 아래 간격 */
            .shop-counter-row:not(:last-child) {
                margin-bottom: 10px;
            }

            /* 스킨 이름 / D+일 텍스트 */
            .shop-counter-name {
                font-size: 14px; /* 너무 커서 밀리는 현상이 있으면 조금 줄임 */
                font-weight: bold;
                /* etc... */
            }

            .shop-counter-days {
                font-size: 14px;
                /* etc... */
            }

            /* "멈추기" 버튼 */
            .shop-counter-stop-btn {
                background: gold;
                color: black;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                padding: 6px 10px;
                text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.6);
                transition: transform 0.2s ease;
            }

            .shop-counter-stop-btn:hover {
                transform: scale(1.05);
            }

            .shop-counter-stop-btn:active {
                transform: scale(0.95);
            }

            @media screen and (max-width: 480px) {
                /* 팝업 전체 크기 */
                .popup {
                    width: 90%; /* 화면 폭의 90% */
                    max-height: 70vh; /* 화면 높이의 70%까지만 사용 */
                    padding: 15px; /* 모바일에서 조금 더 작은 패딩 */
                }

                /* 팝업 안의 스킨 카드 */
                .popup-skin-card {
                    width: 100%;
                    box-shadow: none !important; /* 기존 카드 그림자 제거 */
                    /* max-width: 300px; 주석 처리, 모바일에서도 전체 폭 */
                }

                /* 스킨 카드 안 이미지 */
                .popup-skin-card img {
                    max-width: 100%;
                    height: auto;
                    object-fit: contain; /* 필요하면 cover로 교체 가능 */
                }

                /* 카드 내부 텍스트 (스킨 이름 등) */
                .popup-skin-card .skin-info p {
                    font-size: 14px;
                    line-height: 1.2;
                }

                /* 가격 표시 영역 안 이미지 (VP 아이콘 등) */
                .popup-skin-card .price-info img {
                    width: 16px;
                    height: 16px;
                }

                /* 닫기 버튼 */
                .close-btn {
                    top: 10px;
                    right: 15px;
                    font-size: 20px;
                    z-index: 9999;
                }

                /* 즐겨찾기 버튼 크기 축소 */
                #favorite-btn #shop-counter-btn {
                    font-size: 14px;
                    padding: 6px 10px;
                }
            }
        </style>
    </head>
    <body>
        <button id="menu-button" onclick="openMenu()">☰</button>
        <!-- (새로 추가) 날짜 세기 버튼 -->
        <div class="container">
            <!-- 예시: 왼쪽 사이드바 -->
            <div id="sideMenu" class="side-menu">
                <a href="javascript:void(0)" class="close-side-menu" onclick="closeMenu()">&times;</a>
                <h2>메뉴</h2>
                <ul id="menu-nav">
                    <li onclick="openFavorites()">즐겨찾기</li>
                    <li onclick="openShopCounterPopup()">오늘의 상점 날짜 세기</li>
                </ul>
            </div>
            <div id="shop-counter-popup" class="shop-counter-popup">
                <div class="shop-counter-content">
                    <span class="close-shop-counter" onclick="closeShopCounterPopup()">&times;</span>
                    <h2>오늘의 상점 날짜 세기</h2>

                    <!-- 현재 카운트 중인 스킨 정보 표시 -->
                    <div id="shop-current" class="shop-current">
                        <!-- 예: 스킨 이름, D+일수, 멈추기 버튼 -->
                    </div>

                    <!-- 기록(History) 섹션 -->
                    <div class="shop-history-section">
                        <button onclick="toggleShopHistory()" id="shop-history-btn">기록 보기</button>
                        <div id="shop-history" class="shop-history" style="display: none"></div>
                    </div>
                </div>
            </div>
            <!-- 즐겨찾기 목록 팝업 -->
            <div id="favorites-popup" class="favorites-popup">
                <div class="favorites-popup-content">
                    <span class="close-favorites-popup" onclick="closeFavoritesPopup()">&times;</span>
                    <h2>즐겨찾기 목록</h2>
                    <div id="favorites-list"></div>
                </div>
            </div>

            <div id="popup" class="popup">
                <div class="popup-content">
                    <span class="close-btn" onclick="closePopup()">&times;</span>

                    <!-- 여기부터 스킨 카드 시작 -->
                    <div id="popup-skin-card" class="skin-card popup-skin-card">
                        <div class="price-info" id="popup-price-info">
                            <!-- VP 아이콘과 가격이 들어갈 예정 -->
                        </div>
                        <img id="popup-img" alt="스킨 이미지" />
                        <div class="skin-info">
                            <img id="popup-tier" alt="스킨 등급" />
                            <p id="popup-title"></p>
                        </div>
                    </div>
                    <!-- 스킨 카드 끝 -->

                    <button id="favorite-btn" onclick="toggleFavorite()">즐겨찾기</button>
                    <button id="shop-counter-btn" onclick="toggleShopCounting()">날짜 세기</button>
                </div>
            </div>
            <h1>발로란트 스킨 도감</h1>
            <div class="search-section">
                <input type="text" id="search-box" placeholder="스킨 이름 검색..." oninput="applyFilters()" />
            </div>
            <div class="filter-section">
                <select id="tier-filter" onchange="applyFilters()">
                    <option value="all">모든 등급</option>
                    <option value="select">셀렉트</option>
                    <option value="deluxe">디럭스</option>
                    <option value="premium">프리미엄</option>
                    <option value="exclusive">익스클루시브</option>
                    <option value="ultra">울트라</option>
                </select>
                <select id="type-filter" onchange="applyFilters()">
                    <option value="all">모든 종류</option>
                    <option value="phantom">팬텀</option>
                    <option value="vandal">밴달</option>
                    <option value="sheriff">셰리프</option>
                    <option value="operator">오퍼레이터</option>
                    <option value="stinger">스팅어</option>
                    <option value="ghost">고스트</option>
                    <option value="odin">오딘</option>
                    <option value="marshal">마샬</option>
                    <option value="bucky">버키</option>
                    <option value="judge">져지</option>
                    <option value="frenzy">프렌지</option>
                    <option value="classic">클래식</option>
                    <option value="shorty">쇼티</option>
                    <option value="ares">아레스</option>
                    <option value="bulldog">불독</option>
                    <option value="knife">칼</option>
                    <option value="guardian">가디언</option>
                    <option value="outlaw">아웃로</option>
                </select>
                <select id="price-sort" onchange="applyFilters()">
                    <option value="high">가격 높은 순</option>
                    <option value="low">가격 낮은 순</option>
                </select>
            </div>
            <div class="skins-grid" id="skins-container"></div>
        </div>
        <script>
            const vpIcon =
                "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/Valorant_Points.png";

            const tierImages = {
                select: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/Select-edition-icon.png",
                deluxe: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/Deluxe-edition-icon.png",
                premium:
                    "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/Premium-edition-icon.webp",
                exclusive:
                    "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/Exclusive-edition-icon.png",
                ultra: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/Ultra-edition-icon.png"
            };

            const skins = [
                {
                    name: "에이몬디어 셰리프",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%97%90%EC%9D%B4%EB%AA%AC%EB%94%94%EC%96%B4/Aemondir_Sheriff.webp",
                    tier: "premium",
                    type: "sheriff",
                    price: 1775
                },
                {
                    name: "에이몬디어 버키",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%97%90%EC%9D%B4%EB%AA%AC%EB%94%94%EC%96%B4/Aemondir_Bucky.webp",
                    tier: "premium",
                    type: "bucky",
                    price: 1775
                },
                {
                    name: "에이몬디어 불독",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%97%90%EC%9D%B4%EB%AA%AC%EB%94%94%EC%96%B4/Aemondir_Bulldog.webp",
                    tier: "premium",
                    type: "bulldog",
                    price: 1775
                },
                {
                    name: "에이몬디어 밴달",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%97%90%EC%9D%B4%EB%AA%AC%EB%94%94%EC%96%B4/Aemondir_Vandal.png",
                    tier: "premium",
                    type: "vandal",
                    price: 1775
                },
                {
                    name: "에이몬디어 검",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%97%90%EC%9D%B4%EB%AA%AC%EB%94%94%EC%96%B4/Blade_of_Aemondir.webp",
                    tier: "exclusive",
                    type: "knife",
                    price: 3550
                },
                {
                    name: "암.시장 클래식",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%95%94%EC%8B%9C%EC%9E%A5/Black.Market_Classic.webp",
                    tier: "premium",
                    type: "classic",
                    price: 1775
                },
                {
                    name: "암.시장 불독",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%95%94%EC%8B%9C%EC%9E%A5/Black.Market_Bulldog.webp",
                    tier: "premium",
                    type: "bulldog",
                    price: 1775
                },
                {
                    name: "암.시장 마샬",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%95%94%EC%8B%9C%EC%9E%A5/Black.Market_Marshal.webp",
                    tier: "premium",
                    type: "marshal",
                    price: 1775
                },
                {
                    name: "암.시장 밴달",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%95%94%EC%8B%9C%EC%9E%A5/Black.Market_Vandal.webp",
                    tier: "premium",
                    type: "vandal",
                    price: 1775
                },
                {
                    name: "암.시장 버터플라이 나이프",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%95%94%EC%8B%9C%EC%9E%A5/Black.Market_Butterfly_Knife.webp",
                    tier: "exclusive",
                    type: "knife",
                    price: 3550
                },
                {
                    name: "셀레스티얼 아레스",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%85%80%EB%A0%88%EC%8A%A4%ED%8B%B0%EC%96%BC/Celestial_Ares.webp",
                    tier: "premium",
                    type: "ares",
                    price: 1775
                },
                {
                    name: "셀레스티얼 부채",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%85%80%EB%A0%88%EC%8A%A4%ED%8B%B0%EC%96%BC/Celestial_Fan.webp",
                    tier: "exclusive",
                    type: "knife",
                    price: 3550
                },
                {
                    name: "셀레스티얼 프렌지",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%85%80%EB%A0%88%EC%8A%A4%ED%8B%B0%EC%96%BC/Celestial_Frenzy.webp",
                    tier: "premium",
                    type: "frenzy",
                    price: 1775
                },
                {
                    name: "셀레스티얼 져지",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%85%80%EB%A0%88%EC%8A%A4%ED%8B%B0%EC%96%BC/Celestial_Judge.webp",
                    tier: "premium",
                    type: "judge",
                    price: 1775
                },
                {
                    name: "셀레스티얼 팬텀",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%EC%85%80%EB%A0%88%EC%8A%A4%ED%8B%B0%EC%96%BC/Celestial_Phantom.webp",
                    tier: "premium",
                    type: "phantom",
                    price: 1775
                },
                {
                    name: "크림슨비스트 져지",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%ED%81%AC%EB%A6%BC%EC%8A%A8%EB%B9%84%EC%8A%A4%ED%8A%B8/Crimsonbeast_Judge.webp",
                    tier: "premium",
                    type: "judge",
                    price: 1775
                },
                {
                    name: "크림슨비스트 마샬",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%ED%81%AC%EB%A6%BC%EC%8A%A8%EB%B9%84%EC%8A%A4%ED%8A%B8/Crimsonbeast_Marshal.webp",
                    tier: "premium",
                    type: "marshal",
                    price: 1775
                },
                {
                    name: "크림슨비스트 밴달",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%ED%81%AC%EB%A6%BC%EC%8A%A8%EB%B9%84%EC%8A%A4%ED%8A%B8/Crimsonbeast_Vandal.webp",
                    tier: "premium",
                    type: "vandal",
                    price: 1775
                },
                {
                    name: "크림슨비스트 셰리프",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%ED%81%AC%EB%A6%BC%EC%8A%A8%EB%B9%84%EC%8A%A4%ED%8A%B8/Crimsonbeast_Sheriff.webp",
                    tier: "premium",
                    type: "sheriff",
                    price: 1775
                },
                {
                    name: "크림슨비스트 망치",
                    img: "https://raw.githubusercontent.com/mincift1234/valorantospng/refs/heads/main/images/%ED%81%AC%EB%A6%BC%EC%8A%A8%EB%B9%84%EC%8A%A4%ED%8A%B8/Crimsonbeast_Hammer.webp",
                    tier: "exclusive",
                    type: "knife",
                    price: 3550
                },
            ];

            document.addEventListener("DOMContentLoaded", function () {
                displaySkins(skins);
            });

            function applyFilters() {
                const tier = document.getElementById("tier-filter").value;
                const type = document.getElementById("type-filter").value;
                const sort = document.getElementById("price-sort").value;
                const searchKeyword = document.getElementById("search-box").value.trim().toLowerCase();

                let filteredSkins = skins.filter(
                    (skin) =>
                        (tier === "all" || skin.tier === tier) &&
                        (type === "all" || skin.type === type) &&
                        (searchKeyword === "" || skin.name.toLowerCase().includes(searchKeyword))
                );

                if (sort === "high") {
                    filteredSkins.sort((a, b) => b.price - a.price);
                } else {
                    filteredSkins.sort((a, b) => a.price - b.price);
                }

                displaySkins(filteredSkins);
            }

            function displaySkins(skins) {
                const container = document.getElementById("skins-container");
                container.innerHTML = "";
                skins.forEach((skin) => {
                    container.innerHTML += `
            <div class="skin-card" onclick="openSkinDetails('${skin.name}')" style="transition: transform 0.2s; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                <div class="price-info">
                    <img src="${vpIcon}" alt="VP">
                    <span>${skin.price}</span>
                </div>
                <img src="${skin.img}" alt="${skin.name}">
                <div class="skin-info">
                    <img src="${tierImages[skin.tier]}" alt="${skin.tier}">
                    <p>${skin.name}</p>
                </div>
            </div>
        `;
                });
            }

            let favorites = new Set();

            let shopCounters = {};

            let shopHistory = [];

            document.addEventListener("DOMContentLoaded", function () {
                // shopCounters 불러오기
                const storedCounters = localStorage.getItem("shopCounters");
                if (storedCounters) {
                    shopCounters = JSON.parse(storedCounters);

                    Object.entries(shopCounters).forEach(([skinName, data]) => {
                        if (data.startDate) {
                            data.startDate = new Date(data.startDate);
                        }
                    });
                }

                // shopHistory 불러오기
                const storedHistory = localStorage.getItem("shopHistory");
                if (storedHistory) {
                    shopHistory = JSON.parse(storedHistory);

                    shopHistory.forEach((item) => {
                        item.startDate = new Date(item.startDate);
                        item.endDate = new Date(item.endDate);
                    });
                }

                displaySkins(skins);
            });

            function openSkinDetails(name) {
                const skin = skins.find((s) => s.name === name);
                if (!skin) return;

                // 이미지, 등급 아이콘, 이름 설정
                document.getElementById("popup-img").src = skin.img;
                document.getElementById("popup-tier").src = tierImages[skin.tier];
                document.getElementById("popup-title").textContent = skin.name;

                // 가격 (VP 아이콘 + 숫자)
                document.getElementById("popup-price-info").innerHTML = `
        <img src="${vpIcon}" alt="VP" style="width:16px; height:16px; margin-right:5px;">
        <span>${skin.price}</span>
    `;

                // 즐겨찾기 상태 확인
                const favoriteBtn = document.getElementById("favorite-btn");
                if (favorites.has(skin.name)) {
                    favoriteBtn.textContent = "즐겨찾기 취소";
                } else {
                    favoriteBtn.textContent = "즐겨찾기";
                }
                favoriteBtn.setAttribute("data-skin", skin.name);

                // 날짜 세기 버튼 상태 설정
                const shopCounterBtn = document.getElementById("shop-counter-btn");
                const counter = getShopCounter(name);

                if (counter.isCounting) {
                    shopCounterBtn.textContent = "날짜 세기 중...";
                } else {
                    shopCounterBtn.textContent = "날짜 세기";
                }

                // 팝업 열기
                document.getElementById("popup").style.display = "block";
            }

            function closePopup() {
                document.getElementById("popup").style.display = "none";
            }

            function toggleFavorite() {
                const skinName = document.getElementById("favorite-btn").getAttribute("data-skin");

                if (favorites.has(skinName)) {
                    favorites.delete(skinName);
                    document.getElementById("favorite-btn").textContent = "즐겨찾기";
                } else {
                    favorites.add(skinName);
                    document.getElementById("favorite-btn").textContent = "즐겨찾기 취소";
                }
            }

            function fillMenuList() {
                // sideMenu 안에 스킨 목록을 <li>로 생성
                const listEl = document.getElementById("menu-nav");
                listEl.innerHTML = ""; // 기존 항목 초기화

                skins.forEach((skin) => {
                    const li = document.createElement("li");
                    li.textContent = skin.name;
                    li.onclick = () => {
                        // 스킨 클릭하면 팝업 열기
                        openSkinDetails(skin.name);
                        // 필요하면 메뉴도 자동 닫기
                        closeMenu();
                    };
                    listEl.appendChild(li);
                });
            }
            function openMenu() {
                document.getElementById("sideMenu").classList.add("open");
            }

            function closeMenu() {
                document.getElementById("sideMenu").classList.remove("open");
            }

            function openFavorites() {
                // 사이드 메뉴 닫기(옵션)
                closeMenu();

                // 즐겨찾기 목록을 업데이트해서 표시
                fillFavoritesList();

                // 팝업 열기
                document.getElementById("favorites-popup").style.display = "block";
            }

            function closeFavoritesPopup() {
                document.getElementById("favorites-popup").style.display = "none";
            }

            /**
             * 즐겨찾기 목록 채우기
             */
            function fillFavoritesList() {
                const listContainer = document.getElementById("favorites-list");
                listContainer.innerHTML = "";

                // favorites는 스킨 이름만 들어있는 Set이므로, skins 배열에서 찾아와야 함
                const favoriteSkins = skins.filter((skin) => favorites.has(skin.name));

                if (favoriteSkins.length === 0) {
                    // 즐겨찾기한 스킨이 없으면 메시지 표시
                    const msg = document.createElement("div");
                    msg.textContent = "즐겨찾기한 스킨이 없습니다.";
                    listContainer.appendChild(msg);
                    return;
                }

                // 즐겨찾기된 각 스킨을 목록에 표시
                favoriteSkins.forEach((skin) => {
                    // 항목 하나를 만든다 (div 등)
                    const item = document.createElement("div");
                    item.classList.add("favorite-item");
                    item.textContent = skin.name;

                    // 클릭 시, 기존 팝업으로 이동해서 해당 스킨 팝업을 열 수 있게
                    item.onclick = () => {
                        closeFavoritesPopup(); // 즐겨찾기 팝업 닫고
                        openSkinDetails(skin.name); // 스킨 팝업 열기
                    };

                    listContainer.appendChild(item);
                });
            }

            function toggleShopCounting() {
                const skinName = document.getElementById("popup-title").textContent;
                const counter = getShopCounter(skinName);

                if (!counter.isCounting) {
                    // ✅ 날짜 세기 시작 시 startDate를 Date 객체로 저장
                    counter.isCounting = true;
                    counter.startDate = new Date();

                    alert(`"${skinName}" 날짜 세기를 시작합니다 (D+1).`);
                    document.getElementById("shop-counter-btn").textContent = "날짜 세기 중...";

                    // ✅ localStorage에 반영
                    localStorage.setItem("shopCounters", JSON.stringify(shopCounters));
                } else {
                    stopShopCounting(skinName);
                }
            }

            function stopShopCounting(skinName) {
                const counter = getShopCounter(skinName);
                if (!counter.isCounting) return; // 이미 멈췄다면 패스

                const now = new Date();
                const diffMs = now - new Date(counter.startDate);
                const ONE_DAY_MS = 86400000;
                const days = Math.floor(diffMs / ONE_DAY_MS) + 1; // D+1

                // 기록 저장
                shopHistory.push({
                    skinName: skinName,
                    startDate: counter.startDate,
                    endDate: now,
                    days: days
                });
                localStorage.setItem("shopHistory", JSON.stringify(shopHistory));

                alert(`"${skinName}" 날짜 세기를 종료합니다.\n총 ${days}일 소요!`);

                // 초기화
                counter.isCounting = false;
                counter.startDate = null;
                localStorage.setItem("shopCounters", JSON.stringify(shopCounters));

                // 팝업에 표시된 버튼 텍스트를 "날짜 세기"로 변경
                const currentSkinInPopup = document.getElementById("popup-title").textContent;
                if (currentSkinInPopup === skinName) {
                    document.getElementById("shop-counter-btn").textContent = "날짜 세기";
                }
            }

            function openShopCounterPopup() {
                // 메뉴 닫기
                closeMenu();

                // 현재 상태를 표시
                fillShopCounterInfo();

                // 팝업 열기
                document.getElementById("shop-counter-popup").style.display = "block";
            }

            function closeShopCounterPopup() {
                document.getElementById("shop-counter-popup").style.display = "none";
            }

            function fillShopCounterInfo() {
                const container = document.getElementById("shop-current");
                container.innerHTML = "";

                // 여러 스킨 중에서 세는 중인 것만 찾기
                const countingSkins = Object.entries(shopCounters).filter(([skinName, data]) => data.isCounting);

                if (countingSkins.length === 0) {
                    container.textContent = "현재 카운트 중인 스킨이 없습니다.";
                    return;
                }

                countingSkins.forEach(([skinName, data]) => {
                    const now = new Date();
                    const diffMs = now - data.startDate;
                    const days = Math.floor(diffMs / 86400000) + 1;

                    // 예: 가로 배치
                    const row = document.createElement("div");
                    row.classList.add("shop-counter-row");
                    row.innerHTML = `
            <div class="shop-counter-name">${skinName}</div>
            <div class="shop-counter-days">D+${days}</div>
            <button class="shop-counter-stop-btn">멈추기</button>
        `;
                    // 멈추기 이벤트
                    row.querySelector(".shop-counter-stop-btn").onclick = () => {
                        stopShopCounting(skinName);
                        fillShopCounterInfo(); // 다시 갱신
                    };

                    container.appendChild(row);
                });
            }

            function stopShopCountingUI() {
                stopShopCounting(); // 기존 날짜 세기 멈추기 로직
                fillShopCounterInfo(); // 다시 갱신(카운트 중인 스킨 없으면 안내문 표시)
            }

            function toggleShopHistory() {
                const historyEl = document.getElementById("shop-history");
                if (historyEl.style.display === "none") {
                    // 열기
                    fillShopHistory();
                    historyEl.style.display = "block";
                } else {
                    // 닫기
                    historyEl.style.display = "none";
                }
            }

            // shopHistory: [{ skinName, startDate, endDate, days }, ... ]

            function fillShopHistory() {
                const historyEl = document.getElementById("shop-history");
                historyEl.innerHTML = ""; // 초기화

                if (shopHistory.length === 0) {
                    historyEl.textContent = "아직 기록이 없습니다.";
                    return;
                }

                shopHistory.forEach((record, index) => {
                    const item = document.createElement("div");
                    item.classList.add("shop-history-item");

                    // 기간 계산
                    const start = new Date(record.startDate);
                    const end = new Date(record.endDate);
                    const startStr = start.toLocaleDateString("ko-KR");
                    const endStr = end.toLocaleDateString("ko-KR");

                    // 내부 내용
                    item.innerHTML = `
            <div><strong>스킨:</strong> ${record.skinName}</div>
            <div><strong>기간:</strong> ${startStr} ~ ${endStr} (총 ${record.days}일)</div>
        `;

                    // "기록 삭제" 버튼 생성
                    const deleteBtn = document.createElement("button");
                    deleteBtn.textContent = "기록 삭제";
                    deleteBtn.style.marginTop = "5px";
                    deleteBtn.onclick = () => {
                        deleteShopRecord(index);
                    };
                    item.appendChild(deleteBtn);

                    historyEl.appendChild(item);
                });
            }

            // 기록 배열에서 해당 인덱스 항목 제거
            function deleteShopRecord(index) {
                // index번째 기록 제거
                shopHistory.splice(index, 1);
                // 다시 목록 새로고침
                fillShopHistory();

                localStorage.setItem("shopHistory", JSON.stringify(shopHistory));
            }

            function getShopCounter(skinName) {
                // shopCounters[skinName]이 없으면 만들어 준다
                if (!shopCounters[skinName]) {
                    shopCounters[skinName] = {
                        isCounting: false,
                        startDate: null
                    };
                }
                return shopCounters[skinName];
            }
        </script>
    </body>
</html>
